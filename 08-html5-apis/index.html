<!doctype html>
<html manifest="example.appcache">
	<head>
		<title>Day 8 Bootcamp</title>
		<script src='scripts/lib/jquery-1.8.2.js'></script>
		<!--script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=true"></script-->
		<script>
			$(document).ready(function(){

				var testButt = document.querySelector("#testButton");
				var el = document.querySelector("#inputText");

				testButt.addEventListener('click', function(event){
					var text = el.value;
					eval(el.value);
				})

				var saveButt = document.querySelector("#saveButton");
				saveButt.addEventListener('click',function(event){
					window.localStorage.setItem('text',el.value);
				});

				if( window.localStorage.getItem('text') ){
					var saved = window.localStorage.getItem('text');
					document.querySelector("#inputText").value = saved;
				}

				var el = document.querySelector("#inputText");
				el.addEventListener('dragstart',function(event){

					event.dataTransfer.setData('textValue', el.value);
  					event.dataTransfer.effectAllowed = 'copy';

				},false);

				/*var posButt = document.querySelector("#positionButton");
				posButt.addEventListener('click',function(){

					var geomap = document.querySelector("#geoMap");
					var map = new google.maps.Map(geoMap,{zoom:3,center:new google.maps.LatLng(-34.397, 150.644),mapTypeId: google.maps.MapTypeId.ROADMAP});

				},false);*/

				var socketText = document.querySelector("#socketText");
				var socketReceiver = document.querySelector("#socketReceiver");
				var socket = new WebSocket("ws://echo.websocket.org");
				var sendButt = document.querySelector("#sendButton");

				socket.onopen = function(event){
					socket.send("Connected");
				}

				socket.onmessage = function(event){
					
					socketReceiver.value = event.data; 
				}

				socket.onclose = function(event){
					socketReceiver.value ="Socket closed";
				}

				sendButt.addEventListener("click",function(event){

					socket.send(socketText.value);

				},false);

			});
			
			</script>
	</head>
	<body>
		<section>
			<article>
				<header>
					<h1>JavaScript Code Tester</h1>
				</header>
				<p>Insert your code and try it! Please!</p>
				<textarea id='inputText' rows="10" cols="60"></textarea>
				<textarea id='draggable' rows="10" cols="60"></textarea>
			</article>
			<button id='testButton'>Test me!</button>
			<button id='saveButton'>Save me!</button>	<!--Para la persistencia -->
			<button id="positionButton">Show Position</button> 
			<span id="geoLog"></span>	<!--Guardo la info de log -->
          	<div id="geoMap" style="width:642px, height:280px"> <!--Mapa-->
          		<!--img src="http://www.microsoft.com/global/en-us/news/PublishingImages/exec/billg/print/billg1_print.jpg" /-->
          	</div>
		</section>
		<section>
			<article>
				<header>
					<h1>Socket Test</h1>
				</header>
				<p>Insert text to send!</p>
				<textarea id="socketText" rows="10" cols="60"></textarea>
				<textarea id="socketReceiver" rows="10" cols="60"></textarea>
			</article>
			<button id="sendButton">Send Text!</button>
		</section>
		<section>
			<div id= "workerMessageCount">
				<span>Time to show alert  </span><span id="timer"></span></span>seconds</span>
			</div>
	</body>
</html>